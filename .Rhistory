cohortsToCreate <- readr::read_csv(pathToCsv, col_types = readr::cols())
# Run processing for all_condition_occurrence_summary.sql script
sql <- SqlRender::loadRenderTranslateSql(sqlFilename = "all_condition_occurrence_summary.sql",
packageName = "characterizationPaperPackage",
dbms = attr(conn, "dbms"),
cdm_database = cdmDatabaseSchema,  # This will need to change to your DB name
source_name = paste0("", cdmDatabaseSchema,""), # Note the additional ''s.
results_database_schema = results_database_schema,   # e.g. for me, I save to results
results_sex_diff_summary = "sex_diff_summary")
# Change the below line to reflect where results can be saved. I'm assuming you're saving to cohortDatabaseSchema
results_database_schema = cohortDatabaseSchema # e.g. scratch_jhardi10
# Run processing for all_condition_occurrence_summary.sql script
sql <- SqlRender::loadRenderTranslateSql(sqlFilename = "all_condition_occurrence_summary.sql",
packageName = "characterizationPaperPackage",
dbms = attr(conn, "dbms"),
cdm_database = cdmDatabaseSchema,  # This will need to change to your DB name
source_name = paste0("", cdmDatabaseSchema,""), # Note the additional ''s.
results_database_schema = results_database_schema,   # e.g. for me, I save to results
results_sex_diff_summary = "sex_diff_summary")
sql
library(characterizationPaperPackage)
sql
# Run processing for all_condition_occurrence_summary.sql script
sql <- SqlRender::loadRenderTranslateSql(sqlFilename = "all_condition_occurrence_summary.sql",
packageName = "characterizationPaperPackage",
dbms = attr(conn, "dbms"),
cdm_database = cdmDatabaseSchema,  # This will need to change to your DB name
source_name = paste0("", cdmDatabaseSchema,""), # Note the additional ''s.
results_database_schema = results_database_schema,   # e.g. for me, I save to results
results_sex_diff_summary = "sex_diff_summary")
sql
library(characterizationPaperPackage)
library(magrittr)
ROhdsiWebApi::authorizeWebApi("https://epi.jnj.com:8443/WebAPI", "windows") # Windows authentication
cdmSources <- ROhdsiWebApi::getCdmSources(baseUrl = "https://epi.jnj.com:8443/WebAPI") %>%
dplyr::mutate(baseUrl = "https://epi.jnj.com:8443/WebAPI",
dbms = 'redshift',
sourceDialect = 'redshift',
port = 5439,
version = .data$sourceKey %>% substr(., nchar(.) - 3, nchar(.)) %>% as.integer(),
database = .data$sourceKey %>% substr(., 5, nchar(.) - 6)) %>%
dplyr::group_by(.data$database) %>%
dplyr::arrange(dplyr::desc(.data$version)) %>%
dplyr::mutate(sequence = dplyr::row_number()) %>%
dplyr::ungroup() %>%
dplyr::arrange(.data$database, .data$sequence) %>%
dplyr::mutate(server = tolower(paste0(Sys.getenv("serverRoot"),"/", .data$database)))
# Load the package
library(characterizationPaperPackage)
# You do not have to change the below [but you can]
# cdmDatabaseSchema    <- paste(DB, ".dbo", sep='')     # eg: "ohdsi_cumc_2021q1r2.dbo"
# cohortDatabaseSchema <- paste(DB, ".results", sep='') # eg: "ohdsi_cumc_2021q1r2.results"
# vocabularyDatabaseSchema <- cdmDatabaseSchema
cohortTable <- "testcharacterization"              # this is the name of the output table
connectionSpecifications <- cdmSources %>%
dplyr::filter(sequence == 1) %>%
dplyr::filter(database == 'truven_ccae')
dbms <- connectionSpecifications$dbms # example: 'redshift'
port <- connectionSpecifications$port # example: 2234
server <-
connectionSpecifications$server # example: 'fdsfd.yourdatabase.yourserver.com"
cdmDatabaseSchema <-
connectionSpecifications$cdmDatabaseSchema # example: "cdm"
vocabularyDatabaseSchema <-
connectionSpecifications$vocabDatabaseSchema # example: "vocabulary"
databaseId <-
connectionSpecifications$database # example: "truven_ccae"
userNameService = "redShiftUserName" # example: "this is key ring service that securely stores credentials"
passwordService = "redShiftPassword" # example: "this is key ring service that securely stores credentials"
cohortDatabaseSchema = paste0('scratch_', keyring::key_get(service = userNameService))
connectionDetails <- DatabaseConnector::createConnectionDetails(
dbms = dbms,
user = keyring::key_get(service = userNameService),
password = keyring::key_get(service = passwordService),
port = port,
server = server
)
# Optional: specify where the temporary files will be created:
options(andromedaTempFolder = "D:\\andromedaTemp")
# For Oracle: define a schema that can be used to emulate temp tables:
oracleTempSchema <- NULL
# Start connection
conn <- DatabaseConnector::connect(connectionDetails)
# Change the below line to reflect where results can be saved. I'm assuming you're saving to cohortDatabaseSchema
results_database_schema = cohortDatabaseSchema # e.g. scratch_jhardi10
# Run processing for all_condition_occurrence_summary.sql script
sql <- SqlRender::loadRenderTranslateSql(sqlFilename = "all_condition_occurrence_summary.sql",
packageName = "characterizationPaperPackage",
dbms = attr(conn, "dbms"),
cdm_database = cdmDatabaseSchema,  # This will need to change to your DB name
source_name = paste0("", cdmDatabaseSchema,""), # Note the additional ''s.
results_database_schema = results_database_schema,   # e.g. for me, I save to results
results_sex_diff_summary = "sex_diff_summary")
sql
library(magrittr)
ROhdsiWebApi::authorizeWebApi("https://epi.jnj.com:8443/WebAPI", "windows") # Windows authentication
cdmSources <- ROhdsiWebApi::getCdmSources(baseUrl = "https://epi.jnj.com:8443/WebAPI") %>%
dplyr::mutate(baseUrl = "https://epi.jnj.com:8443/WebAPI",
dbms = 'redshift',
sourceDialect = 'redshift',
port = 5439,
version = .data$sourceKey %>% substr(., nchar(.) - 3, nchar(.)) %>% as.integer(),
database = .data$sourceKey %>% substr(., 5, nchar(.) - 6)) %>%
dplyr::group_by(.data$database) %>%
dplyr::arrange(dplyr::desc(.data$version)) %>%
dplyr::mutate(sequence = dplyr::row_number()) %>%
dplyr::ungroup() %>%
dplyr::arrange(.data$database, .data$sequence) %>%
dplyr::mutate(server = tolower(paste0(Sys.getenv("serverRoot"),"/", .data$database)))
# Load the package
library(characterizationPaperPackage)
# Parameters [loaded from credentials.csv, which is not uploaded to Github!]
# CREDENTIALS  <- 'C:\\Users\\tonys\\Documents\\Research\\csv\\credentials.csv' # login credentials
private.data = read.csv(CREDENTIALS, fileEncoding = 'UTF-8-BOM')
PYTHON_PATH  <- 'C:\\Users\\admin_jhardi10\\AppData\\Local\\Programs\\Python\\Python39'
PACKAGE_PATH <- 'c:/Users/tonys/Research/characterizationPaperPackage/'
DB           <- private.data$db
# You do not have to change the below [but you can]
# cdmDatabaseSchema    <- paste(DB, ".dbo", sep='')     # eg: "ohdsi_cumc_2021q1r2.dbo"
# cohortDatabaseSchema <- paste(DB, ".results", sep='') # eg: "ohdsi_cumc_2021q1r2.results"
# vocabularyDatabaseSchema <- cdmDatabaseSchema
cohortTable <- "testcharacterization"              # this is the name of the output table
connectionSpecifications <- cdmSources %>%
dplyr::filter(sequence == 1) %>%
dplyr::filter(database == 'truven_ccae')
dbms <- connectionSpecifications$dbms # example: 'redshift'
port <- connectionSpecifications$port # example: 2234
server <-
connectionSpecifications$server # example: 'fdsfd.yourdatabase.yourserver.com"
cdmDatabaseSchema <-
connectionSpecifications$cdmDatabaseSchema # example: "cdm"
vocabularyDatabaseSchema <-
connectionSpecifications$vocabDatabaseSchema # example: "vocabulary"
databaseId <-
connectionSpecifications$database # example: "truven_ccae"
userNameService = "redShiftUserName" # example: "this is key ring service that securely stores credentials"
passwordService = "redShiftPassword" # example: "this is key ring service that securely stores credentials"
cohortDatabaseSchema = paste0('scratch_', keyring::key_get(service = userNameService))
connectionDetails <- DatabaseConnector::createConnectionDetails(
dbms = dbms,
user = keyring::key_get(service = userNameService),
password = keyring::key_get(service = passwordService),
port = port,
server = server
)
# Optional: specify where the temporary files will be created:
options(andromedaTempFolder = "D:\\andromedaTemp")
# For Oracle: define a schema that can be used to emulate temp tables:
oracleTempSchema <- NULL
# Start connection
conn <- DatabaseConnector::connect(connectionDetails)
# Change the below line to reflect where results can be saved. I'm assuming you're saving to cohortDatabaseSchema
results_database_schema = cohortDatabaseSchema # e.g. scratch_jhardi10
# Run processing for all_condition_occurrence_summary.sql script
sql <- SqlRender::loadRenderTranslateSql(sqlFilename = "all_condition_occurrence_summary.sql",
packageName = "characterizationPaperPackage",
dbms = attr(conn, "dbms"),
cdm_database = cdmDatabaseSchema,  # This will need to change to your DB name
source_name = paste0("", cdmDatabaseSchema,""), # Note the additional ''s.
results_database_schema = results_database_schema,   # e.g. for me, I save to results
results_sex_diff_summary = "sex_diff_summary")
DatabaseConnector::executeSql(conn, sql)
rlang::last_error()
sql
attr(conn, "dbms")
cdmDatabaseSchema
# Run processing for all_condition_occurrence_summary.sql script
sql <- SqlRender::loadRenderTranslateSql(sqlFilename = "all_condition_occurrence_summary.sql",
packageName = "characterizationPaperPackage",
dbms = attr(conn, "dbms"),
cdm_database = cdmDatabaseSchema,  # This will need to change to your DB name
#source_name = paste0("", cdmDatabaseSchema,""), # Note the additional ''s.
results_database_schema = results_database_schema,   # e.g. for me, I save to results
results_sex_diff_summary = "sex_diff_summary")
sql
DatabaseConnector::executeSql(conn, sql)
# Run processing for all_condition_occurrence_summary.sql script
sql <- SqlRender::loadRenderTranslateSql(sqlFilename = "all_condition_occurrence_summary.sql",
packageName = "characterizationPaperPackage",
dbms = attr(conn, "dbms"),
# cdm_database = cdmDatabaseSchema,  # This will need to change to your DB name
# source_name = paste0("", cdmDatabaseSchema,""), # Note the additional ''s.
results_database_schema = results_database_schema,   # e.g. for me, I save to results
results_sex_diff_summary = "sex_diff_summary")
DatabaseConnector::executeSql(conn, sql)
cdmDatabaseSchema
# Run processing for all_condition_occurrence_summary.sql script
sql <- SqlRender::loadRenderTranslateSql(sqlFilename = "all_condition_occurrence_summary.sql",
packageName = "characterizationPaperPackage",
dbms = attr(conn, "dbms"),
cdm_database = cdmDatabaseSchema,  # This will need to change to your DB name
# source_name = paste0("", cdmDatabaseSchema,""), # Note the additional ''s.
results_database_schema = results_database_schema,   # e.g. for me, I save to results
results_sex_diff_summary = "sex_diff_summary")
DatabaseConnector::executeSql(conn, sql)
library(magrittr)
ROhdsiWebApi::authorizeWebApi("https://epi.jnj.com:8443/WebAPI", "windows") # Windows authentication
cdmSources <- ROhdsiWebApi::getCdmSources(baseUrl = "https://epi.jnj.com:8443/WebAPI") %>%
dplyr::mutate(baseUrl = "https://epi.jnj.com:8443/WebAPI",
dbms = 'redshift',
sourceDialect = 'redshift',
port = 5439,
version = .data$sourceKey %>% substr(., nchar(.) - 3, nchar(.)) %>% as.integer(),
database = .data$sourceKey %>% substr(., 5, nchar(.) - 6)) %>%
dplyr::group_by(.data$database) %>%
dplyr::arrange(dplyr::desc(.data$version)) %>%
dplyr::mutate(sequence = dplyr::row_number()) %>%
dplyr::ungroup() %>%
dplyr::arrange(.data$database, .data$sequence) %>%
dplyr::mutate(server = tolower(paste0(Sys.getenv("serverRoot"),"/", .data$database)))
# Load the package
library(characterizationPaperPackage)
# Parameters [loaded from credentials.csv, which is not uploaded to Github!]
# CREDENTIALS  <- 'C:\\Users\\tonys\\Documents\\Research\\csv\\credentials.csv' # login credentials
private.data = read.csv(CREDENTIALS, fileEncoding = 'UTF-8-BOM')
PYTHON_PATH  <- 'C:\\Users\\admin_jhardi10\\AppData\\Local\\Programs\\Python\\Python39'
PACKAGE_PATH <- 'c:/Users/tonys/Research/characterizationPaperPackage/'
DB           <- private.data$db
# You do not have to change the below [but you can]
# cdmDatabaseSchema    <- paste(DB, ".dbo", sep='')     # eg: "ohdsi_cumc_2021q1r2.dbo"
# cohortDatabaseSchema <- paste(DB, ".results", sep='') # eg: "ohdsi_cumc_2021q1r2.results"
# vocabularyDatabaseSchema <- cdmDatabaseSchema
cohortTable <- "testcharacterization"              # this is the name of the output table
connectionSpecifications <- cdmSources %>%
dplyr::filter(sequence == 1) %>%
dplyr::filter(database == 'truven_ccae')
dbms <- connectionSpecifications$dbms # example: 'redshift'
port <- connectionSpecifications$port # example: 2234
server <-
connectionSpecifications$server # example: 'fdsfd.yourdatabase.yourserver.com"
cdmDatabaseSchema <-
connectionSpecifications$cdmDatabaseSchema # example: "cdm"
vocabularyDatabaseSchema <-
connectionSpecifications$vocabDatabaseSchema # example: "vocabulary"
databaseId <-
connectionSpecifications$database # example: "truven_ccae"
userNameService = "redShiftUserName" # example: "this is key ring service that securely stores credentials"
passwordService = "redShiftPassword" # example: "this is key ring service that securely stores credentials"
cohortDatabaseSchema = paste0('scratch_', keyring::key_get(service = userNameService))
connectionDetails <- DatabaseConnector::createConnectionDetails(
dbms = dbms,
user = keyring::key_get(service = userNameService),
password = keyring::key_get(service = passwordService),
port = port,
server = server
)
# Optional: specify where the temporary files will be created:
options(andromedaTempFolder = "D:\\andromedaTemp")
# For Oracle: define a schema that can be used to emulate temp tables:
oracleTempSchema <- NULL
# Start connection
conn <- DatabaseConnector::connect(connectionDetails)
conn
# Change the below line to reflect where results can be saved. I'm assuming you're saving to cohortDatabaseSchema
results_database_schema = cohortDatabaseSchema # e.g. scratch_jhardi10
# Run processing for all_condition_occurrence_summary.sql script
sql <- SqlRender::loadRenderTranslateSql(sqlFilename = "all_condition_occurrence_summary.sql",
packageName = "characterizationPaperPackage",
dbms = attr(conn, "dbms"),
cdm_database = cdmDatabaseSchema,  # This will need to change to your DB name
# source_name = paste0("", cdmDatabaseSchema,""), # Note the additional ''s.
results_database_schema = results_database_schema,   # e.g. for me, I save to results
results_sex_diff_summary = "sex_diff_summary")
sql
DatabaseConnector::executeSql(conn, sql)
library(magrittr)
ROhdsiWebApi::authorizeWebApi("https://epi.jnj.com:8443/WebAPI", "windows") # Windows authentication
cdmSources <- ROhdsiWebApi::getCdmSources(baseUrl = "https://epi.jnj.com:8443/WebAPI") %>%
dplyr::mutate(baseUrl = "https://epi.jnj.com:8443/WebAPI",
dbms = 'redshift',
sourceDialect = 'redshift',
port = 5439,
version = .data$sourceKey %>% substr(., nchar(.) - 3, nchar(.)) %>% as.integer(),
database = .data$sourceKey %>% substr(., 5, nchar(.) - 6)) %>%
dplyr::group_by(.data$database) %>%
dplyr::arrange(dplyr::desc(.data$version)) %>%
dplyr::mutate(sequence = dplyr::row_number()) %>%
dplyr::ungroup() %>%
dplyr::arrange(.data$database, .data$sequence) %>%
dplyr::mutate(server = tolower(paste0(Sys.getenv("serverRoot"),"/", .data$database)))
# Load the package
library(characterizationPaperPackage)
# Parameters [loaded from credentials.csv, which is not uploaded to Github!]
# CREDENTIALS  <- 'C:\\Users\\tonys\\Documents\\Research\\csv\\credentials.csv' # login credentials
private.data = read.csv(CREDENTIALS, fileEncoding = 'UTF-8-BOM')
PYTHON_PATH  <- 'C:\\Users\\admin_jhardi10\\AppData\\Local\\Programs\\Python\\Python39'
# You do not have to change the below [but you can]
# cdmDatabaseSchema    <- paste(DB, ".dbo", sep='')     # eg: "ohdsi_cumc_2021q1r2.dbo"
# cohortDatabaseSchema <- paste(DB, ".results", sep='') # eg: "ohdsi_cumc_2021q1r2.results"
# vocabularyDatabaseSchema <- cdmDatabaseSchema
cohortTable <- "testcharacterization"              # this is the name of the output table
connectionSpecifications <- cdmSources %>%
dplyr::filter(sequence == 1) %>%
dplyr::filter(database == 'truven_ccae')
dbms <- connectionSpecifications$dbms # example: 'redshift'
port <- connectionSpecifications$port # example: 2234
server <-
connectionSpecifications$server # example: 'fdsfd.yourdatabase.yourserver.com"
cdmDatabaseSchema <-
connectionSpecifications$cdmDatabaseSchema # example: "cdm"
vocabularyDatabaseSchema <-
connectionSpecifications$vocabDatabaseSchema # example: "vocabulary"
databaseId <-
connectionSpecifications$database # example: "truven_ccae"
userNameService = "redShiftUserName" # example: "this is key ring service that securely stores credentials"
passwordService = "redShiftPassword" # example: "this is key ring service that securely stores credentials"
cohortDatabaseSchema = paste0('scratch_', keyring::key_get(service = userNameService))
connectionDetails <- DatabaseConnector::createConnectionDetails(
dbms = dbms,
user = keyring::key_get(service = userNameService),
password = keyring::key_get(service = passwordService),
port = port,
server = server
)
# Optional: specify where the temporary files will be created:
options(andromedaTempFolder = "D:\\andromedaTemp")
# For Oracle: define a schema that can be used to emulate temp tables:
oracleTempSchema <- NULL
# Start connection
conn <- DatabaseConnector::connect(connectionDetails)
# Instantiate cohorts:
pathToCsv <- system.file("settings", "CohortsToCreateFinal.csv", package = "characterizationPaperPackage")
# Change the below line to reflect where results can be saved. I'm assuming you're saving to cohortDatabaseSchema
results_database_schema = cohortDatabaseSchema # e.g. scratch_jhardi10
# Change the below line to reflect where results can be saved. I'm assuming you're saving to cohortDatabaseSchema
results_database_schema = cohortDatabaseSchema # e.g. scratch_jhardi10
library(characterizationPaperPackage)
# You do not have to change the below [but you can]
# cdmDatabaseSchema    <- paste(DB, ".dbo", sep='')     # eg: "ohdsi_cumc_2021q1r2.dbo"
# cohortDatabaseSchema <- paste(DB, ".results", sep='') # eg: "ohdsi_cumc_2021q1r2.results"
# vocabularyDatabaseSchema <- cdmDatabaseSchema
cohortTable <- "testcharacterization"              # this is the name of the output table
connectionSpecifications <- cdmSources %>%
dplyr::filter(sequence == 1) %>%
dplyr::filter(database == 'truven_ccae')
dbms <- connectionSpecifications$dbms # example: 'redshift'
port <- connectionSpecifications$port # example: 2234
server <-
connectionSpecifications$server # example: 'fdsfd.yourdatabase.yourserver.com"
cdmDatabaseSchema <-
connectionSpecifications$cdmDatabaseSchema # example: "cdm"
vocabularyDatabaseSchema <-
connectionSpecifications$vocabDatabaseSchema # example: "vocabulary"
databaseId <-
connectionSpecifications$database # example: "truven_ccae"
userNameService = "redShiftUserName" # example: "this is key ring service that securely stores credentials"
passwordService = "redShiftPassword" # example: "this is key ring service that securely stores credentials"
cohortDatabaseSchema = paste0('scratch_', keyring::key_get(service = userNameService))
connectionDetails <- DatabaseConnector::createConnectionDetails(
dbms = dbms,
user = keyring::key_get(service = userNameService),
password = keyring::key_get(service = passwordService),
port = port,
server = server
)
# Optional: specify where the temporary files will be created:
options(andromedaTempFolder = "D:\\andromedaTemp")
# For Oracle: define a schema that can be used to emulate temp tables:
oracleTempSchema <- NULL
# Start connection
conn <- DatabaseConnector::connect(connectionDetails)
# Change the below line to reflect where results can be saved. I'm assuming you're saving to cohortDatabaseSchema
results_database_schema = cohortDatabaseSchema # e.g. scratch_jhardi10
# Run processing for all_condition_occurrence_summary.sql script
sql <- SqlRender::loadRenderTranslateSql(sqlFilename = "all_condition_occurrence_summary.sql",
packageName = "characterizationPaperPackage",
dbms = attr(conn, "dbms"),
cdm_database = cdmDatabaseSchema,  # This will need to change to your DB name
# source_name = paste0("", cdmDatabaseSchema,""), # Note the additional ''s.
results_database_schema = results_database_schema,   # e.g. for me, I save to results
results_sex_diff_summary = "sex_diff_summary")
DatabaseConnector::executeSql(conn, sql)
library(characterizationPaperPackage)
library(magrittr)
ROhdsiWebApi::authorizeWebApi("https://epi.jnj.com:8443/WebAPI", "windows") # Windows authentication
cdmSources <- ROhdsiWebApi::getCdmSources(baseUrl = "https://epi.jnj.com:8443/WebAPI") %>%
dplyr::mutate(baseUrl = "https://epi.jnj.com:8443/WebAPI",
dbms = 'redshift',
sourceDialect = 'redshift',
port = 5439,
version = .data$sourceKey %>% substr(., nchar(.) - 3, nchar(.)) %>% as.integer(),
database = .data$sourceKey %>% substr(., 5, nchar(.) - 6)) %>%
dplyr::group_by(.data$database) %>%
dplyr::arrange(dplyr::desc(.data$version)) %>%
dplyr::mutate(sequence = dplyr::row_number()) %>%
dplyr::ungroup() %>%
dplyr::arrange(.data$database, .data$sequence) %>%
dplyr::mutate(server = tolower(paste0(Sys.getenv("serverRoot"),"/", .data$database)))
# Load the package
library(characterizationPaperPackage)
# You do not have to change the below [but you can]
# cdmDatabaseSchema    <- paste(DB, ".dbo", sep='')     # eg: "ohdsi_cumc_2021q1r2.dbo"
# cohortDatabaseSchema <- paste(DB, ".results", sep='') # eg: "ohdsi_cumc_2021q1r2.results"
# vocabularyDatabaseSchema <- cdmDatabaseSchema
cohortTable <- "testcharacterization"              # this is the name of the output table
connectionSpecifications <- cdmSources %>%
dplyr::filter(sequence == 1) %>%
dplyr::filter(database == 'truven_ccae')
dbms <- connectionSpecifications$dbms # example: 'redshift'
port <- connectionSpecifications$port # example: 2234
server <-
connectionSpecifications$server # example: 'fdsfd.yourdatabase.yourserver.com"
cdmDatabaseSchema <-
connectionSpecifications$cdmDatabaseSchema # example: "cdm"
vocabularyDatabaseSchema <-
connectionSpecifications$vocabDatabaseSchema # example: "vocabulary"
databaseId <-
connectionSpecifications$database # example: "truven_ccae"
userNameService = "redShiftUserName" # example: "this is key ring service that securely stores credentials"
passwordService = "redShiftPassword" # example: "this is key ring service that securely stores credentials"
cohortDatabaseSchema = paste0('scratch_', keyring::key_get(service = userNameService))
connectionDetails <- DatabaseConnector::createConnectionDetails(
dbms = dbms,
user = keyring::key_get(service = userNameService),
password = keyring::key_get(service = passwordService),
port = port,
server = server
)
# Optional: specify where the temporary files will be created:
options(andromedaTempFolder = "D:\\andromedaTemp")
# For Oracle: define a schema that can be used to emulate temp tables:
oracleTempSchema <- NULL
# Start connection
conn <- DatabaseConnector::connect(connectionDetails)
# Instantiate cohorts:
pathToCsv <- system.file("settings", "CohortsToCreateFinal.csv", package = "characterizationPaperPackage")
# Change the below line to reflect where results can be saved. I'm assuming you're saving to cohortDatabaseSchema
results_database_schema = cohortDatabaseSchema # e.g. scratch_jhardi10
# Run processing for all_condition_occurrence_summary.sql script
sql <- SqlRender::loadRenderTranslateSql(sqlFilename = "all_condition_occurrence_summary.sql",
packageName = "characterizationPaperPackage",
dbms = attr(conn, "dbms"),
cdm_database = cdmDatabaseSchema,  # This will need to change to your DB name
# source_name = paste0("", cdmDatabaseSchema,""), # Note the additional ''s.
results_database_schema = results_database_schema,   # e.g. for me, I save to results
results_sex_diff_summary = "sex_diff_summary")
DatabaseConnector::executeSql(conn, sql)
# Run processing for all_condition_occurrence_summary.sql script
sql <- SqlRender::loadRenderTranslateSql(sqlFilename = "all_condition_occurrence_summary.sql",
packageName = "characterizationPaperPackage",
dbms = attr(conn, "dbms"),
cdm_database = cdmDatabaseSchema,  # This will need to change to your DB name
source_name = paste0("", cdmDatabaseSchema,""), # Note the additional ''s.
results_database_schema = results_database_schema,   # e.g. for me, I save to results
results_sex_diff_summary = "sex_diff_summary")
DatabaseConnector::executeSql(conn, sql)
cdmDatabaseSchema
paste0("", cdmDatabaseSchema,"")
paste0("'", cdmDatabaseSchema,"'")
cdmDatabaseSchema
# Run processing for all_condition_occurrence_summary.sql script
sql <- SqlRender::loadRenderTranslateSql(sqlFilename = "all_condition_occurrence_summary.sql",
packageName = "characterizationPaperPackage",
dbms = attr(conn, "dbms"),
cdm_database = cdmDatabaseSchema,  # This will need to change to your DB name
source_name = paste0("'", cdmDatabaseSchema,"'"), # Note the additional ''s.
results_database_schema = results_database_schema,   # e.g. for me, I save to results
results_sex_diff_summary = "sex_diff_summary")
DatabaseConnector::executeSql(conn, sql)
# Run processing sexdiff_cohort_reference_ver5.sql script
sql <- SqlRender::loadRenderTranslateSql(sqlFilename = "sexdiff_cohort_reference_ver5.sql",
packageName = "characterizationPaperPackage",
dbms = attr(conn, "dbms"),
cdm_database = "ohdsi_cumc_2021q1r2",
source_name = "'ohdsi_cumc_2021q1r2'",
results_database_schema = results_database_schema,
target_cohort_table = cohortTable,
sexdiff_cohort_covarate_summary_v5 = "sexdiff_cohort_covarate_summary_v5",
sexdiff_cohort_ttonset_v5 = "sexdiff_cohort_ttonset_v5",
sexdiff_cohort_ttonset_summary_v5 = "sexdiff_cohort_ttonset_summary_v5")
DatabaseConnector::executeSql(conn, sql)
library(characterizationPaperPackage)
detach("package:characterizationPaperPackage", unload = TRUE)
detach("package:reticulate", unload = TRUE)
detach("package:OhdsiSharing", unload = TRUE)
devtools::install_github("ROhdsiWebApi")
install.packages("drat")
install.packages("drat")
devtools::install_github("ROhdsiWebApi")
install.packages("devtools")
install.packages("devtools")
install.packages("devtools")
install.packages("devtools")
install.packages("devtools")
install.packages("devtools")
install.packages("devtools")
---------------------------
Updating Loaded Packages
---------------------------
One or more of the packages to be updated are currently loaded. Restarting R prior to install is highly recommended.
RStudio can restart R before installing the requested packages. All work and data will be preserved during restart.
Do you want to restart R prior to install?
---------------------------
Cancel   Yes   No
---------------------------
Yes
devtools::install_github("ROhdsiWebApi")
library(cli)
devtools::install_github("ROhdsiWebApi")
devtools::install_github("ROhdsiWebApi")
devtools::install_github("ROhdsiWebApi")
devtools::install_github("ROhdsiWebApi")
devtools::install_github("ROhdsiWebApi")
install.packages("reticulate")
detach("package:cli", unload = TRUE)
detach("package:datasets", unload = TRUE)
detach("package:graphics", unload = TRUE)
detach("package:grDevices", unload = TRUE)
detach("package:methods", unload = TRUE)
detach("package:base", unload = TRUE)
detach("package:stats", unload = TRUE)
detach("package:utils", unload = TRUE)
